(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[29],{"35Q0":function(e,t,n){var i,o,a,r,s=t,l=n("oAGj"),c=n("cZuM"),u=n("gXiO"),h=n("iCxV"),d=n("c+uM"),p=n("oKI3");s.TAG_SHAPE_ID="shape-id",s.ShapeCategory=l.defineEnum("ShapeCategory",{None:0,Circle:1,Square:2,Social:3,Cutout:4,Banner:5,Decorative:6,Other:7,Avoid:8}),s.TagGroup=l.defineEnum("TagGroup",{none:0,banner:1,circle:2,square:3,other:4,decorative:5,unused:6}),s.TheoShape=(i=function(){},l.defineClass({name:"TheoShape",ctor:i,props:{init_f4eb:function(e,t,n,i,o,a,r,s,c,u,h,d,p,g,S){void 0===g&&(g=!1),void 0===S&&(S=!1),this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.alignmentEdges=a,this.formality=c,this.drama=u,this.maxScale=h,this.minAspect=d,this.maxAspect=p,this.category=r,this.tags=l.clone(s),this.clockwise=g,this.premium=S},init_implicit:function(e,t,n,i,o,a,r,s,c,u,h,d,p,g,S){this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.formality=a,this.drama=r,this.alignmentEdges=s,this.category=c,this.tags=l.clone(u),this.clockwise=h,this.premium=d,this.maxScale=p,this.maxAspect=g,this.minAspect=S}}}),i),s.ShapeLibraryDataStructures=(o=function(){this.nonSvgBackingShapes=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)],this.svgBackingShapes=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,c.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,c.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.seperatorShapes=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.DisplayOrderForCategories=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial],this.DisplayOrderForShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]},this.DisplayOrderForSmallSetCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]},this.DisplayOrderForLetterGridShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]},this.DisplayOrderForSymmetricPathsShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAsymmetricPathsShapesByCategory={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAutoLayoutShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]},this.NonSuggestableBackingShapes=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"],this.LockupBackingShapeIDs=[],this.BrowsableBackingShapes=[],this.FilledBackingShapes=[],this.shapeDictionary={},this.nonSvgBackingShapeIDs=[]},l.defineClass({name:"ShapeLibraryDataStructures",ctor:o,props:{init_d41d:function(){this.FilledBackingShapes.push(s.ShapeLibrary.Square),this.FilledBackingShapes.push(s.ShapeLibrary.Circle);for(var e=l.iter(this.svgBackingShapes);!e.done;e.next()){var t=e.value;this.LockupBackingShapeIDs.push(t.id),this.shapeDictionary[t.id]=t,t.deprecated||(this.BrowsableBackingShapes.push(t.id),t.filled&&this.FilledBackingShapes.push(t.id))}for(var n=l.iter(this.nonSvgBackingShapes);!n.done;n.next())t=n.value,this.shapeDictionary[t.id]=t,this.nonSvgBackingShapeIDs.push(t.id);this.ShapeIDToCategory={};for(var i=l.iter(this.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,a=l.iter(this.DisplayOrderForShapesByCategory[o]);!a.done;a.next()){var r=a.value;this.ShapeIDToCategory[r]=o}},init_implicit:function(e,t,n,i,o,a,r,u,h,d,p,g,S,m,f,A,_,C){void 0===e&&(e=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)]),void 0===t&&(t=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,c.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,c.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,c.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===n&&(n=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,c.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===i&&(i=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial]),void 0===o&&(o={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===a&&(a={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]}),void 0===r&&(r={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]}),void 0===u&&(u={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]}),void 0===h&&(h={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===d&&(d={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===p&&(p={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]}),void 0===g&&(g=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"]),void 0===m&&(m=[]),void 0===f&&(f=[]),void 0===A&&(A=[]),void 0===_&&(_={}),void 0===C&&(C=[]),this.nonSvgBackingShapes=l.clone(e),this.svgBackingShapes=l.clone(t),this.seperatorShapes=l.clone(n),this.DisplayOrderForCategories=l.clone(i),this.DisplayOrderForShapesByCategory=l.clone(o),this.DisplayOrderForCharStyleShapesByCategory=l.clone(a),this.DisplayOrderForSmallSetCharStyleShapesByCategory=l.clone(r),this.DisplayOrderForLetterGridShapesByCategory=l.clone(u),this.DisplayOrderForSymmetricPathsShapesByCategory=l.clone(h),this.DisplayOrderForAsymmetricPathsShapesByCategory=l.clone(d),this.DisplayOrderForAutoLayoutShapesByCategory=l.clone(p),this.NonSuggestableBackingShapes=l.clone(g),this.ShapeIDToCategory=l.clone(S),this.LockupBackingShapeIDs=l.clone(m),this.BrowsableBackingShapes=l.clone(f),this.FilledBackingShapes=l.clone(A),this.shapeDictionary=l.clone(_),this.nonSvgBackingShapeIDs=l.clone(C)},clone:function(){return o.init_implicit(this.nonSvgBackingShapes,this.svgBackingShapes,this.seperatorShapes,this.DisplayOrderForCategories,this.DisplayOrderForShapesByCategory,this.DisplayOrderForCharStyleShapesByCategory,this.DisplayOrderForSmallSetCharStyleShapesByCategory,this.DisplayOrderForLetterGridShapesByCategory,this.DisplayOrderForSymmetricPathsShapesByCategory,this.DisplayOrderForAsymmetricPathsShapesByCategory,this.DisplayOrderForAutoLayoutShapesByCategory,this.NonSuggestableBackingShapes,this.ShapeIDToCategory,this.LockupBackingShapeIDs,this.BrowsableBackingShapes,this.FilledBackingShapes,this.shapeDictionary,this.nonSvgBackingShapeIDs)}}}),o),s.ShapeLibrary=(a=function(){u.CoreObject.call(this)},r={},l.defineClass({name:"ShapeLibrary",ctor:a,superName:"CoreObject",statics:{CategoryBasic:"BASIC",CategoryBanner:"BANNER",CategoryDecorative:"DECORATIVE",CategorySocial:"SOCIAL",CategoryExclusive:"EXCLUSIVE",Square:"square",Circle:"circle",shapeLibraryDataStructures:{get:function(){return void 0===r.shapeLibraryDataStructures&&(r.shapeLibraryDataStructures=s.ShapeLibraryDataStructures.init_d41d()),r.shapeLibraryDataStructures}},LockupBackingShapeIDs:{get:function(){return void 0===r.LockupBackingShapeIDs&&(r.LockupBackingShapeIDs=a.shapeLibraryDataStructures.LockupBackingShapeIDs),r.LockupBackingShapeIDs},set:function(e){r.LockupBackingShapeIDs=e}},NonSvgBackingShapeIDs:{get:function(){return void 0===r.NonSvgBackingShapeIDs&&(r.NonSvgBackingShapeIDs=a.shapeLibraryDataStructures.nonSvgBackingShapeIDs),r.NonSvgBackingShapeIDs},set:function(e){r.NonSvgBackingShapeIDs=e}},BrowsableBackingShapes:{get:function(){return void 0===r.BrowsableBackingShapes&&(r.BrowsableBackingShapes=a.shapeLibraryDataStructures.BrowsableBackingShapes),r.BrowsableBackingShapes},set:function(e){r.BrowsableBackingShapes=e}},FilledBackingShapes:{get:function(){return void 0===r.FilledBackingShapes&&(r.FilledBackingShapes=a.shapeLibraryDataStructures.FilledBackingShapes),r.FilledBackingShapes},set:function(e){r.FilledBackingShapes=e}},shapeDictionary:{get:function(){return void 0===r.shapeDictionary&&(r.shapeDictionary=a.shapeLibraryDataStructures.shapeDictionary),r.shapeDictionary},set:function(e){r.shapeDictionary=e}},NonSuggestableBackingShapes:{get:function(){return void 0===r.NonSuggestableBackingShapes&&(r.NonSuggestableBackingShapes=a.shapeLibraryDataStructures.NonSuggestableBackingShapes),r.NonSuggestableBackingShapes},set:function(e){r.NonSuggestableBackingShapes=e}},SeperatorShapes:{get:function(){return void 0===r.SeperatorShapes&&(r.SeperatorShapes=a.shapeLibraryDataStructures.seperatorShapes),r.SeperatorShapes},set:function(e){r.SeperatorShapes=e}},getShapeDataForArtworkId:function(e){var t="none";return null!=e&&(t=e),a.shapeDictionary[t]},applyToShapeForma:function(e,t){var n,i;null!=(n=l.opt(h.Host.resourceUtils,(function(e){return e.urlForResource("shape",t)})))&&(i=h.Host.pathUtils.artworkFromURL(n,!1))&&(e.canonicalArtwork=i.artwork,e.sliceBox=i.sliceBox,e.contentRegion=i.contentRegion,e.shapeLibraryID=t)},categoryForShapeID:function(e){return a.shapeLibraryDataStructures.ShapeIDToCategory[e]},displayOrderForCategories:function(){return a.shapeLibraryDataStructures.DisplayOrderForCategories},displayOrderForCompatibleShapeIDs:function(e,t,n,i,o){return d.LockupStyle.isLetterGrid(t)?a.displayOrderForLetterGridShapeIDs(e,i,o):d.LockupStyle.isPath(t)?a.displayOrderForPathShapeIDs(e,n,i,o):i?a.displayOrderForCharStyleShapeIDs(e,o):a.displayOrderForShapeIDs(e)},getCategorySlice:function(e,t){return e[t]||[]},displayOrderForShapeIDs:function(e){return a.getCategorySlice(l.clone(a.shapeLibraryDataStructures.DisplayOrderForShapesByCategory),e)},displayOrderForCharStyleShapeIDs:function(e,t){var n=l.clone(t?a.shapeLibraryDataStructures.DisplayOrderForSmallSetCharStyleShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForCharStyleShapesByCategory);return a.getCategorySlice(l.clone(n),e)},displayOrderForLetterGridShapeIDs:function(e,t,n){return a.getCategorySlice(l.clone(a.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory),e)},displayOrderForPathShapeIDs:function(e,t,n,i){if(n)return[];var o=l.clone(p.TextPathLibrary.isPathSymmetric(t)?a.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return a.getCategorySlice(l.clone(o),e)},displayOrderForAutoLayoutShapeIDs:function(e,t,n){return a.getCategorySlice(l.clone(a.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory),e)},isBackingShapeStyleCompatible:function(e,t,n){return d.LockupStyle.isLetterGrid(e.layout)?a.isBackingShapeLetterGridCompatible(t,n):d.LockupStyle.isPath(e.layout)?a.isBackingShapePathCompatible(e.pathID,t,n):!d.LockupStyle.isAutoLayout(e.layout)||a.isBackingShapeAutoLayoutCompatible(t,n)},isSVGIncluded:function(e,t){var n;if(null!=(n=e))for(var i=l.iter(a.shapeLibraryDataStructures.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,r=l.clone(t[o]),s=l.iter(r);!s.done;s.next())if(s.value==n)return!0;return!1},isBackingShapeLetterGridCompatible:function(e,t){return e!=d.LockupBacking.SVGBackground?e==d.LockupBacking.None:a.isSVGIncluded(t,l.clone(a.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory))},isBackingShapePathCompatible:function(e,t,n){if(t==d.LockupBacking.Rows)return!1;if(t!=d.LockupBacking.SVGBackground)return!0;var i=l.clone(p.TextPathLibrary.isPathSymmetric(e)?a.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return a.isSVGIncluded(n,l.clone(i))},isBackingShapeAutoLayoutCompatible:function(e,t){return e!=d.LockupBacking.SVGBackground?e==d.LockupBacking.None:a.isSVGIncluded(t,l.clone(a.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory))}}}),a)},"4mEG":function(e,t,n){var i,o,a,r,s,l,c,u,h=t,d=n("oAGj"),p=n("Tq01"),g=n("kYI4"),S=n("SpAV"),m=n("CWW7"),f=n("yGNn"),A=n("FNB+"),_=n("q5zr"),C=n("oTAR"),y=n("lJxM"),T=n("T6jX"),b=n("Kkml"),v=n("LGJg"),P=n("sW6f"),E=n("mxdD"),D=n("QTen");h.AddContentAction=(i=function e(t,n,i,o,a){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=m.AddFormaParams.DEFAULTS),void 0===a&&(a=!0),this.content=t,this.pairedContent=n,this.preservePlacement=i,this.addParams=o,this.allowSelection=a,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddContentAction",ctor:i,superName:"Action",statics:{TYPE:"AddContentAction"},props:{getUserAction:function(e){return this.content instanceof _.ImageContentNode?b.UserActions.AddImage():this.content instanceof P.VideoContentNode?b.UserActions.AddVideo():this.content instanceof v.VectorContentNode?b.UserActions.AddIcon():this.content instanceof y.TextContentNode?b.UserActions.AddText():(S.CoreAssert.warning("Could not determine user action for content"),b.UserActions.AddImage())},execute:function(e){var t=this;return m.CreationFacade.addContent(e.document.firstPage,this.content,this.pairedContent,this.preservePlacement,this.addParams).then((function(n){var i=d.as(n,A.Forma);return null!=i?(t.allowSelection&&(t.newSelection=[i]),i.isImage()&&T.TheoDocumentUtils.updateConstrainedImageInfo(e.document),f.CorePromise.resolve(new p.FormaActionResult([i]))):(S.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddContentAction.execute","AddContentAction.swift",75),f.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),i),h.AddIconContentAction=(o=function e(t,n,i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0),this.url=t,this.metadata=n,this.replacing=i,this.undoable=o,this.allowSelection=a,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddIconContentAction",ctor:o,superName:"Action",statics:{TYPE:"AddIconContentAction"},props:{getUserAction:function(e){var t=null!=this.replacing?b.UserActions.ReplaceIcon():b.UserActions.AddIcon();return 0==this.undoable&&(t.undoable=!1),t},execute:function(e){var t=this,n=C.SVGParserUtils.createShapeFromSVGURL(e.document,this.url,this.metadata),i=d.as(n,A.Forma);return null!=i?C.SVGParserUtils.addShapeToDocument(e.document,n,this.replacing).then((function(e){return t.allowSelection&&(t.newSelection=[i]),f.CorePromise.resolve(new p.FormaActionResult([i]))})):(S.CoreAssert.fail("expected a forma result from SVGParserUtils.CreateShapeFromSVGURL","AddIconContentAction.execute","AddContentAction.swift",140),f.CorePromise.resolve(null))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),o),h.ActionUndoability=d.defineEnum("ActionUndoability",{useDefault:0,forceUndoable:1,forceNonUndoable:2}),h.AddImageContentAction=(a=function e(t,n,i,o,a,r,s,l,c,u,d,g,S){void 0===d&&(d=h.ActionUndoability.useDefault),void 0===g&&(g=null),void 0===S&&(S=!0),this.page=t,this.sourceURL=n,this.mimeType=i,this.width=o,this.height=a,this.hasAlpha=r,this.mediaMetadata=s,this.localIdentifier=l,this.tags=c,this.addParams=u,this.undoable=d,this.contentID=g,this.allowSelection=S,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddImageContentAction",ctor:a,superName:"Action",statics:{TYPE:"AddImageContentAction"},props:{getUserAction:function(e){var t=null!=this.addParams.formaToReplace?b.UserActions.ReplaceImage():b.UserActions.AddImage();return this.undoable!=h.ActionUndoability.useDefault&&(t.undoable=this.undoable==h.ActionUndoability.forceUndoable),t},execute:function(e){var t,n=this;if(t=d.as(d.opt(e.document,(function(e){return e.content.createNode(_.ImageContentNode.KIND,n.contentID)})),_.ImageContentNode)){var i;if(t.url=this.sourceURL,t.mimeType=this.mimeType,t.pixelWidth=this.width,t.pixelHeight=this.height,t.mediaMetadata=this.mediaMetadata,t.localIdentifier=this.localIdentifier,this.hasAlpha&&(t.hasAlpha=!0),i=this.tags)for(var o=d.iter(i);!o.done;o.next()){var a,r,s=o.key,l=o.value;null!=(a=d.as(s,"String"))&&null!=(r=d.as(l,"String"))&&t.setTag(a,r)}return t.createImageFeatures(),d.opt(t.image,(function(e){return e.hasAlpha()})),m.CreationFacade.addContent(e.document.firstPage,t,null,!1,this.addParams).then((function(t){var i=d.as(t,A.Forma);return null!=i?(T.TheoDocumentUtils.updateConstrainedImageInfo(e.document),n.allowSelection&&(n.newSelection=[i]),f.CorePromise.resolve(new p.FormaActionResult([i]))):(S.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddImageContentAction.execute","AddContentAction.swift",260),f.CorePromise.resolve(null))}))}return f.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),a),h.VideoPosterParams=(r=function(e,t,n,i){this.url=e,this.mimeType=t,this.width=n,this.height=i},d.defineClass({name:"VideoPosterParams",ctor:r,superName:"CoreObject"}),r),h.AddVideoContentAction=(s=function e(t,n,i,o,a,r,s,l,c,u,h,g,S,m,f){void 0===f&&(f=!0),this.page=t,this.sourceURL=n,this.mimeType=i,this.trackWidth=o,this.trackHeight=a,this.duration=r,this.times=d.clone(s),this.posterParams=l,this.isLivePhoto=c,this.mediaMetadata=u,this.localIdentifier=h,this.originalDuration=g,this.offsetInOriginal=S,this.addParams=m,this.allowSelection=f,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddVideoContentAction",ctor:s,superName:"Action",statics:{TYPE:"AddVideoContentAction"},props:{getUserAction:function(e){return b.UserActions.AddVideo()},execute:function(e){var t,n,i,o,a=this;return(t=E.VideoFacade.addVideoContent(d.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,d.clone(this.times),this.isLivePhoto))?((i=this.posterParams)&&(o=n=d.as(d.opt(e.document,(function(e){return e.content.createNode(_.ImageContentNode.KIND,null)})),_.ImageContentNode))&&(o.url=i.url,o.mimeType=i.mimeType,o.pixelWidth=i.width,o.pixelHeight=i.height),m.CreationFacade.addContent(this.page,t,n,!1,this.addParams).then((function(e){var t=d.as(e,A.Forma);return null!=t?(a.allowSelection&&(a.newSelection=[t]),f.CorePromise.resolve(new p.FormaActionResult([t]))):(S.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddVideoContentAction.execute","AddContentAction.swift",398),f.CorePromise.resolve(null))}))):f.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection},cloneWithPosterParams:function(e){return new s(this.page,this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,d.clone(this.times),e,this.isLivePhoto,this.mediaMetadata,this.localIdentifier,this.originalDuration,this.offsetInOriginal,this.addParams)}}}),s),h.ReplaceVideoFormaContentAction=(l=function e(t,n,i,o,a,r,s,l,c,u,h,g,S,m,f,A){void 0===A&&(A=!0),this.forma=t,this.sourceURL=n,this.mimeType=i,this.trackWidth=o,this.trackHeight=a,this.duration=r,this.startTime=s,this.trimDuration=l,this.offsetInOriginal=c,this.originalDuration=u,this.times=d.clone(h),this.posterParams=g,this.isLivePhoto=S,this.mediaMetadata=m,this.localIdentifier=f,this.allowSelection=A,p.Action.call(this,e.TYPE)},d.defineClass({name:"ReplaceVideoFormaContentAction",ctor:l,superName:"Action",statics:{TYPE:"ReplaceVideoFormaContentAction"},props:{getUserAction:function(e){return b.UserActions.ReplaceVideoContent()},execute:function(e){var t,n,i,o;return(t=E.VideoFacade.addVideoContent(d.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,d.clone(this.times),this.isLivePhoto))?(m.CreationFacade.removeContentNodeFromDocument(this.forma.videoContentNode,e.document),this.forma.videoContentNode=t,m.CreationFacade.addContentNodeToDocument(t,e.document),(n=this.posterParams)&&(i=d.as(d.opt(e.document,(function(e){return e.content.createNode(_.ImageContentNode.KIND,null)})),_.ImageContentNode))&&(i.url=n.url,i.mimeType=n.mimeType,i.pixelWidth=n.width,i.pixelHeight=n.height,m.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,e.document),this.forma.contentNode=i,m.CreationFacade.addContentNodeToDocument(i,e.document)),(o=d.as(this.forma.style,D.VideoStyle))&&(o.startTime=this.startTime,o.duration=this.trimDuration),this.allowSelection&&(this.newSelection=[this.forma]),f.CorePromise.resolve(new p.FormaActionResult([this.forma]))):f.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),l),h.AddLogoContentAction=(c=function e(t,n,i,o,a,r){void 0===a&&(a=null),void 0===r&&(r=!0),this.theoLogo=n,this.page=t,this.replacing=i,this.localIdentifier=o,this.componentID=a,this.allowSelection=r,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddLogoContentAction",ctor:c,superName:"Action",statics:{TYPE:"AddLogoContentAction"},props:{getUserAction:function(e){return b.UserActions.AddLogo()},execute:function(e){var t=this,n=g.BrandingFacade.makeLogoContentNode(this.theoLogo,this.page.document);n.createImageFeatures(),n.localIdentifier=this.localIdentifier,null!=this.componentID&&(n.componentID=this.componentID);var i=new m.AddFormaParams(p.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,this.replacing,m.FloatingImageStrategy.Always);return m.CreationFacade.addContent(e.document.firstPage,n,null,!1,i).then((function(e){var n=d.as(e,A.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),f.CorePromise.resolve(new p.FormaActionResult([n]))):(S.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddLogoContentAction.execute","AddContentAction.swift",632),f.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),c),h.AddTextContentAction=(u=function e(t,n,i){void 0===n&&(n=m.AddFormaParams.DEFAULTS),void 0===i&&(i=!0),this.text=t,this.addParams=n,this.allowSelection=i,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddTextContentAction",ctor:u,superName:"Action",statics:{TYPE:"AddTextContentAction"},props:{getUserAction:function(e){return this.addParams.behavior==p.ControllerSettingsBehaviorEnum.SetControllerSettings?b.UserActions.AddTextUI():b.UserActions.AddText()},execute:function(e){var t=this;return m.CreationFacade.addText(e.document.firstPage,this.text,!0,this.addParams).then((function(e){var n=d.as(e,A.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),f.CorePromise.resolve(new p.FormaActionResult([n]))):(S.CoreAssert.fail("expected a forma result from CreationFacade.addText","AddTextContentAction.execute","AddContentAction.swift",695),f.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(d.clone(this.newSelection)),this.newSelection}}}),u)},"70fJ":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("SpAV"),l=n("gpZI"),c=n("yGNn"),u=n("Kkml");o.ApplyColorAction=(i=function e(t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=0),this.formaeToColor=a.clone(t),this.colors=a.clone(n),this.inCharStyleMode=i,this.shuffleIndex=o,r.Action.call(this,e.TYPE)},a.defineClass({name:"ApplyColorAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyColorAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formaeToColor)?n.map((function(e){return e.formaID}),this):a.clone(e.selection.IDs),u.UserActions.ChangeColor(t.join(","))},execute:function(e){var t=a.clone(this.formaeToColor||e.selection.asFormaArray());s.CoreAssert.isTrue(t.length>0,"empty Forma array","ApplyColorAction.execute","ColorActions.swift",49);var n=a.clone(l.ColorFacade.applyColorsToFormae(a.clone(t),a.clone(this.colors),this.inCharStyleMode,this.shuffleIndex));return this.inCharStyleMode||(e.selection.IDs=n.map((function(e){return e.formaID}),this)),c.CorePromise.resolve(new r.FormaActionResult(a.clone(n)))}}}),i)},"Aj/e":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("yGNn"),l=n("P83h"),c=n("8t9B"),u=n("Kkml");o.ChangeBackgroundShapeAction=(i=function e(t,n,i,o){this.formae=a.clone(t),this.backing=n,this.artworkID=i,this.charStyleMode=o,r.Action.call(this,e.TYPE)},a.defineClass({name:"ChangeBackgroundShapeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeBackgroundShapeAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formae)?n.map((function(e){return e.formaID}),this):a.clone(e.selection.IDs),this.charStyleMode&&(t=t.map((function(e){return e+":secondary"}),this)),u.UserActions.ChangeBackgroundShape(t.join(","))},execute:function(e){for(var t=a.clone(this.formae||e.selection.asFormaArray()),n=a.iter(t);!n.done;n.next()){var i,o=n.value;if(i=a.as(o.controller,c.TypeLockupController)){var u=new l.FormaStyleChangedEvent(o);o.beginUpdate(u),this.charStyleMode&&(e.selection.inCharStyleMode=!0),i.styleController.applyBacking(this.backing,this.artworkID),o.endUpdate(u)}}return s.CorePromise.resolve(new r.ActionResult)}}}),i)},J3ZR:function(e,t,n){n("oAGj")},"KgU+":function(e,t,n){var i,o,a,r,s=t,l=n("oAGj"),c=n("Tq01"),u=n("cYKp"),h=n("yGNn"),d=n("Kkml");s.ApplyAnimationStyleAction=(i=function e(t,n){this.style=t,this.page=n,c.Action.call(this,e.TYPE)},l.defineClass({name:"ApplyAnimationStyleAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyAnimationStyleAction"},props:{getUserAction:function(e){return d.UserActions.ApplyAnimationStyle()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),h.CorePromise.resolve(null)}}}),i),s.ApplyAnimationStyleForPlaybackAction=(o=function(e,t){s.ApplyAnimationStyleAction.call(this,e,t)},l.defineClass({name:"ApplyAnimationStyleForPlaybackAction",ctor:o,superName:"ApplyAnimationStyleAction",props:{getUserAction:function(e){return d.UserActions.ApplyAnimationStyleForPlayback()},execute:function(e){return u.AnimationFacade.applyAnimationStyle(this.style,this.page),h.CorePromise.resolve(null)}}}),o),s.ResetAnimation=(a=function e(t,n){this.resetFormaTree=t,this.page=n,c.Action.call(this,e.TYPE)},l.defineClass({name:"ResetAnimation",ctor:a,superName:"Action",statics:{TYPE:"ResetAnimation"},props:{getUserAction:function(e){return d.UserActions.ResetAnimation()},execute:function(e){return l.opt(this.page.root.animation,(function(e){return e.invalidate()})),h.CorePromise.resolve(null)}}}),a),s.ShuffleAnimationStyleAction=(r=function(e,t){this.style=e,this.page=t,c.Action.call(this,s.ApplyAnimationStyleAction.TYPE)},l.defineClass({name:"ShuffleAnimationStyleAction",ctor:r,superName:"Action",statics:{TYPE:"ShuffleAnimationStyleAction"},props:{getUserAction:function(e){return d.UserActions.ShuffleAnimationStyle()},execute:function(e){var t=u.AnimationFacade.shuffleAnimationStyle(this.style,this.page);return this.page.animationLibrary.setRootAnimationStyle(t,this.page.root),h.CorePromise.resolve(new c.AnimationStyleActionResult(t))}}}),r)},SVjO:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("yGNn"),l=n("LP+A"),c=n("uxH+"),u=n("8t9B"),h=n("Kkml");o.ApplyTemplateAction=(i=function(){},a.defineClass({name:"ApplyTemplateAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyTemplateAction"},props:{init_dd3b:function(e,t){this.designSuggestion=e,this.rootForma=t,this.originalRootForma=null,this.templateDocument=null,this.tapIndex=0,r.Action.call(this,i.TYPE)},init_e1db:function(e,t,n,o){this.templateDocument=e,this.tapIndex=n,this.rootForma=t,this.originalRootForma=o,this.designSuggestion=null,r.Action.call(this,i.TYPE)},getUserAction:function(e){return h.UserActions.ApplyTemplate()},execute:function(e){var t,n,i,o=[];if(null==this.designSuggestion&&(a.opt(a.as(this.rootForma.controller,c.RootController),(function(e){return e.createGridControllerIfNone()})),(t=this.originalRootForma)&&(a.opt(a.as(t.controller,c.RootController),(function(e){return e.createGridControllerIfNone()})),n=this.templateDocument))){o=a.clone(l.DesignSuggestionFacade.createSuggestionsFromTemplate(n,this.rootForma,t));var h=this.tapIndex%o.length;h>=0&&(this.designSuggestion=o[h])}if(i=this.designSuggestion){i.apply();for(var d=a.clone(this.rootForma.filterWithCallback((function(e){return e.isTypeLockup()}))),p=a.iter(d);!p.done;p.next()){var g,S=p.value;(g=a.as(S.controller,u.TypeLockupController))&&g.updateGroup()}}return s.CorePromise.resolve(new r.SuggestionsActionResult(a.clone(o)))}}}),i)},Tq01:function(e,t,n){var i,o,a,r,s,l,c,u,h,d,p,g,S=t,m=n("oAGj"),f=n("SpAV"),A=n("gXiO"),_=n("yGNn"),C=n("Kkml");S.Action=(i=function(e){this.type=e,A.CoreObject.call(this)},m.defineClass({name:"Action",ctor:i,superName:"CoreObject",props:{canDo:function(e){return!0},getUserAction:function(e){return f.CoreAssert.fail(this.type+" does not implement getUserAction","Action.getUserAction","Actions.swift",38),C.UserActions.AddText()},execute:function(e){return _.CorePromise.reject("no default impl")},updateSelection:function(e){return null}}}),i),S.ActionResult=(o=function(){A.CoreObject.call(this)},a={},m.defineClass({name:"ActionResult",ctor:o,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===a.NONE&&(a.NONE=new o),a.NONE}},fromPromiseAny:function(e){var t;return null==e?o.NONE:(t=m.as(e,o))?t:(f.CoreAssert.fail("default action impl returned a promise for something other than an ActionResult","ActionResult.fromPromiseAny","Actions.swift",76),o.NONE)}}}),o),S.FormaActionResult=(r=function(e){this.formae=m.clone(e),S.ActionResult.call(this)},m.defineClass({name:"FormaActionResult",ctor:r,superName:"ActionResult"}),r),S.DoubleActionResult=(s=function(e){this.value=e,S.ActionResult.call(this)},m.defineClass({name:"DoubleActionResult",ctor:s,superName:"ActionResult"}),s),S.TextRangeActionResult=(l=function(e){this.range=e,S.ActionResult.call(this)},m.defineClass({name:"TextRangeActionResult",ctor:l,superName:"ActionResult"}),l),S.LockupStyleActionResult=(c=function(e){this.style=e,S.ActionResult.call(this)},m.defineClass({name:"LockupStyleActionResult",ctor:c,superName:"ActionResult"}),c),S.AnimationStyleActionResult=(u=function(e){this.style=e,S.ActionResult.call(this)},m.defineClass({name:"AnimationStyleActionResult",ctor:u,superName:"ActionResult"}),u),S.ImageStyleActionResult=(h=function(e){this.style=e,S.ActionResult.call(this)},m.defineClass({name:"ImageStyleActionResult",ctor:h,superName:"ActionResult"}),h),S.SuggestionsActionResult=(d=function(e){this.suggestions=m.clone(e),S.ActionResult.call(this)},m.defineClass({name:"SuggestionsActionResult",ctor:d,superName:"ActionResult"}),d),S.DragActionResult=(p=function(e){this.snapLines=m.clone(e),S.ActionResult.call(this)},m.defineClass({name:"DragActionResult",ctor:p,superName:"ActionResult"}),p),S.PlacementActionResult=(g=function(e){this.snapResult=e,S.ActionResult.call(this)},m.defineClass({name:"PlacementActionResult",ctor:g,superName:"ActionResult"}),g),S.ControllerSettingsBehaviorEnum=m.defineEnum("ControllerSettingsBehaviorEnum",{IgnoreControllerSettings:0,SetControllerSettings:1})},"b/QB":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("SpAV"),s=n("yhkb"),l=n("gXiO"),c=n("ascj"),u=n("SDdr"),h=n("uWOl");o.ImageFilterLibrary=(i=function(){this.styleMixes={Darken:[.1,.3,.5,.7]},this.imageStyles=[h.ImageStyle.init_1265("None"),h.ImageStyle.init_1265("Greyscale",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:"themeDerivedDark"},{key:c.ColorRole.FieldSecondary,value:"themeDerivedLight"}]),u.CompositeFilter.init_514f(void 0,"Duotone",1,"normal",void 0,void 0,"duotone")),h.ImageStyle.init_1265("Darken",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:"themeDerivedDark"},{key:c.ColorRole.FieldSecondary,value:"themeDerivedDark"}]),u.CompositeFilter.init_514f(void 0,"Duotone",.5,"normal",void 0,void 0,"duotone")),h.ImageStyle.init_1265("Blur",null,u.CompositeFilter.init_514f(void 0,"Blur",1,"none",void 0,void 0,"none")),h.ImageStyle.init_1265("Overlay",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:a.as(s.ColorLibraryController.FILTER_OVERLAY_KEYS[0],"String")}]),u.CompositeFilter.init_514f(void 0,"ReduceContrastOverlay",.25,"overlay",!1,.5,"offset",1,1)),h.ImageStyle.init_1265("Multiply",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:s.ColorLibraryController.FILTER_MULTIPLY_KEYS[1]}]),u.CompositeFilter.init_514f(void 0,"DesaturateMultiply",.4,"multiply",!0,void 0,"offset",.5,1)),h.ImageStyle.init_1265("Blend",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:s.ColorLibraryController.FILTER_BLEND_KEYS[2]}]),u.CompositeFilter.init_514f(void 0,"Blend",.3,"normal",!1,void 0,"none")),h.ImageStyle.init_1265("DuoTone",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:a.as(s.ColorLibraryController.FILTER_DUOTONE_LOW_KEYS[2],"String")},{key:c.ColorRole.FieldSecondary,value:a.as(s.ColorLibraryController.FILTER_DUOTONE_HIGH_KEYS[0],"String")}]),u.CompositeFilter.init_514f(void 0,"Duotone",1,"normal",void 0,void 0,"duotone")),h.ImageStyle.init_1265("Screen",c.ColorTable.init_25f6([{key:c.ColorRole.FieldPrimary,value:s.ColorLibraryController.FILTER_SCREEN_KEYS[0]}]),u.CompositeFilter.init_514f(void 0,"Screen",.4,"screen",!1,void 0,"none"))],l.CoreObject.call(this)},a.defineClass({name:"ImageFilterLibrary",ctor:i,superName:"CoreObject",props:{getImageStyle:function(e){for(var t,n=a.iter(this.imageStyles);!n.done;n.next()){var i=n.value;if(e==i.name){t=i;break}}return t},getAllImageStyles:function(){return this.imageStyles},getNextImageStyleOfSameType:function(e,t){void 0===t&&(t=!0);var n,i,o,l,d=e.name,p=!0;switch(d){case"None":n=this.getImageStyle("None");break;case"Greyscale":n=this.getImageStyle("Greyscale");break;case"Blur":n=this.getImageStyle("Blur");break;case"Darken":(n=a.as(this.getImageStyle("Darken").clone(),h.ImageStyle)).colorLibrary=e.colorLibrary;break;case"Overlay":case"Multiply":case"Blend":case"Screen":if((n=a.as(this.getImageStyle(d).clone(),h.ImageStyle)).colorLibrary=e.colorLibrary,null==(m=e.colors.colorID(c.ColorRole.FieldPrimary)))return r.CoreAssert.fail("Style '"+d+"' missing FieldPrimary key","ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",383),null;var g=s.ColorLibraryController.getNextKeyInSet(m),S=g[0];p=T=g[1],n.colors.setColorId(c.ColorRole.FieldPrimary,S);break;case"DuoTone":var m;if((n=a.as(this.getImageStyle("DuoTone").clone(),h.ImageStyle)).colorLibrary=e.colorLibrary,null==(m=e.colors.colorID(c.ColorRole.FieldPrimary)))return r.CoreAssert.fail("Missing color key","ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",398),null;var f,A=s.ColorLibraryController.getNextKeyInSet(m),_=A[0];if(A[1],n.colors.setColorId(c.ColorRole.FieldPrimary,_),null==(f=e.colors.colorID(c.ColorRole.FieldSecondary)))return r.CoreAssert.fail("Missing color key","ImageFilterLibrary.getNextImageStyleOfSameType","ImageFilterLibrary.swift",412),null;var C=s.ColorLibraryController.getNextKeyInSet(f),y=C[0],T=C[1];n.colors.setColorId(c.ColorRole.FieldSecondary,y),p=T;break;default:n=this.getImageStyle("None")}if((i=this.styleMixes[d])&&null!=(o=a.opt(a.as(e.filter,u.CompositeFilter),(function(e){return e.mix})))&&t&&p&&null!=(l=a.indexOf(i,o))){var b=i[(l+1)%i.length];n.filter.mix=b}return a.opt(n,(function(t){return t.adjustments=e.adjustments})),a.opt(n,(function(t){return t.opacity=e.opacity})),n},getImageStyles:function(){return[this.getImageStyle("None"),this.getImageStyle("Greyscale"),this.getImageStyle("Darken"),this.getImageStyle("Overlay"),this.getImageStyle("Blend"),this.getImageStyle("Screen"),this.getImageStyle("DuoTone"),this.getImageStyle("Multiply")]},hasNextStyleOfSameType:function(e){var t;return!!(t=this.getNextImageStyleOfSameType(e,!0))&&!e.equals(t)}}}),i)},g8Fi:function(e,t,n){var i,o,a,r,s,l=t,c=n("oAGj"),u=n("SpAV"),h=n("gXiO"),d=n("iCxV"),p=n("90dd"),g=n("oKlP"),S=n("ZoS2");l.PointerTypeEnum=c.defineEnum("PointerTypeEnum",{Mouse:0,Touch:1}),l.PointerStatus=c.defineEnum("PointerStatus",{DragFree:0,DragHeld:1,DragActive:2,DragInactive:3}),l.PointerMark=(i=function(e,t){this.when=e,this.point=t},c.defineClass({name:"PointerMark",ctor:i,props:{div:function(e){return new i(this.when/e,{x:this.point.x/e,y:this.point.y/e})}}}),i),l._minus_PointerMark_PointerMark=function(e,t){return new l.PointerMark(e.when-t.when,{x:e.point.x-t.point.x,y:e.point.y-t.point.y})},l._plus_PointerMark_PointerMark=function(e,t){return new l.PointerMark(e.when+t.when,{x:e.point.x+t.point.x,y:e.point.y+t.point.y})},l.PointerState=(o=function(e,t,n,i,o){this.down=!1,this.cancelled=!1,this.tapCount=1,this.modifierKeys={},this.pointerStatus=l.PointerStatus.DragFree,this.slippage=g.TheoPoint.ZERO,this.id=e,this.type=t,this.currentPage=n,this.startLocation=i,this.currentLocation=i,this.startTime=o,this.currentTime=o,this.history=[],h.CoreObject.call(this),this.updateHistory(o,i)},c.defineClass({name:"PointerState",ctor:o,superName:"CoreObject",props:{updateState:function(e){u.CoreAssert.isTrue(e.type==this.type&&e.onPage===this.currentPage&&e.id==this.id,void 0,"PointerState.updateState","PointersState.swift",142),this.currentLocation=e.loc,this.currentTime=e.when,this.updateHistory(e.when,e.loc),this.tapCount=e.tapCount,this.cancelled=e.cancelled,this.viewportTransform=e.viewportTransform,this.modifierKeys=c.clone(e.modifierKeys)},updateHistory:function(e,t){var n=this.history.length-28;n>0&&this.history.splice(0,n),this.history.push(new l.PointerMark(e,{x:t.x,y:t.y}))},pointerVelocity:function(){for(var e=d.Host.async.getSystemUptimeInSeconds()-.2,t=[],n=this.history.length-1;n>=0&&!(this.history[n].when<e);)t.splice(0,0,this.history[n]),n-=1;for(var i=c.clone(function(e,t){var n=c.clone(e),i=t;if(i>e.length&&(i=e.length),i<=1)return n;for(var o=c.iter(c.range(1,i,!1));!o.done;o.next())for(var a=o.value,r=c.iter(c.range(0,e.length-a,!1));!r.done;r.next())n[a+(h=r.value)]=l._plus_PointerMark_PointerMark(n[a+h],e[h]);for(var s=c.iter(c.range(1,i,!1));!s.done;s.next())n[a=s.value]=n[a].div(c.toDouble(a+1));for(var u=c.iter(c.range(i,e.length,!1));!u.done;u.next()){var h;n[h=u.value]=n[h].div(c.toDouble(i))}return n}(c.clone(t),3)),o=3,a=2,r=0,s=0;o<i.length;){var u=l._minus_PointerMark_PointerMark(i[o],i[a]);r+=u.when,s+=Math.sqrt(u.point.x*u.point.x+u.point.y*u.point.y),o+=1,a+=1}var h=s/r;return isNaN(h)?0:h}}}),o),l.PointerUpdate=(a=function(e,t,n,i,o){this.cancelled=!1,this.tapCount=1,this.id=e,this.type=t,this.onPage=n,this.loc=i,this.when=o,this.cancelled=!1,this.tapCount=1,this.modifierKeys={}},c.defineClass({name:"PointerUpdate",ctor:a,superName:"CoreObject"}),a),l.PointersState=(r=function(){this.LONG_PRESS_TIME_THRESHOLD=1.25,this.LONG_PRESS_DIST_THRESHOLD=50,this.pointers_=[],S.TheoPublishingObject.call(this)},c.defineClass({name:"PointersState",ctor:r,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{onPointersDown:function(e){for(var t=[],n=c.iter(e);!n.done;n.next()){var i,o=n.value;(i=this.pointerByID(o.id))&&(u.CoreAssert.isTrue(o.type==l.PointerTypeEnum.Mouse,void 0,"PointersState.onPointersDown","PointersState.swift",326),c.remove(this.pointers_,i)),(i=new l.PointerState(o.id,o.type,o.onPage,o.loc,o.when)).viewportTransform=o.viewportTransform,i.down=!0,i.modifierKeys=c.clone(o.modifierKeys),this.pointers_.push(i),t.push(i)}this.publish(new l.PointersStateChangeMessage(this,l.PointersStateChangeTypeEnum.PointersDown,c.clone(t)))},onPointersMoved:function(e){for(var t=[],n=c.iter(e);!n.done;n.next()){var i=n.value,o=this.pointerByID(i.id);null==o&&((o=new l.PointerState(i.id,i.type,i.onPage,i.loc,i.when)).down=!1,u.CoreAssert.isTrue(i.type==l.PointerTypeEnum.Mouse,void 0,"PointersState.onPointersMoved","PointersState.swift",355),this.pointers_.push(o)),o.updateState(i),t.push(o)}this.publish(new l.PointersStateChangeMessage(this,l.PointersStateChangeTypeEnum.PointersMoved,c.clone(t)))},onPointersUp:function(e){for(var t=[],n=c.iter(e);!n.done;n.next()){var i,o=n.value;(i=this.pointerByID(o.id))&&(i.type==l.PointerTypeEnum.Touch&&c.remove(this.pointers_,i),i.updateState(o),t.push(i))}var a=new l.PointersStateChangeMessage(this,l.PointersStateChangeTypeEnum.PointersUp,c.clone(t));this.publish(a)},forEachPointer:function(e){for(var t=c.iter(this.pointers_);!t.done;t.next())e(t.value)},forEachPointerDown:function(e){for(var t=c.iter(this.pointers_);!t.done;t.next()){var n=t.value;n.down&&e(n)}},pointerCount:function(){return this.pointers_.length},pointerDownCount:function(){for(var e=0,t=c.iter(this.pointers_);!t.done;t.next())t.value.down&&(e+=1);return e},pointerByID:function(e){for(var t=c.iter(this.pointers_);!t.done;t.next()){var n=t.value;if(n.id==e)return n}return null}}}),r),l.PointersStateChangeTypeEnum=c.defineEnum("PointersStateChangeTypeEnum",{PointersDown:0,PointersMoved:1,PointersUp:2}),l.PointersStateChangeMessage=(s=function e(t,n,i){this.changeType=n,this.pointers=c.clone(i),p.TheoMessage.call(this,e.TYPE,t)},c.defineClass({name:"PointersStateChangeMessage",ctor:s,superName:"TheoMessage",statics:{TYPE:{get:function(){return"PointersStateChangeMessage"}}}}),s)},hJqd:function(e,t,n){var i,o,a,r,s=t,l=n("oAGj"),c=n("Tq01"),u=n("kYI4"),h=n("Kkml");s.BrandifyAction=(i=function e(t,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.authoringContext=t,this.applyFonts=n,this.applyColors=o,this.addLogo=i,c.Action.call(this,e.TYPE)},l.defineClass({name:"BrandifyAction",ctor:i,superName:"Action",statics:{TYPE:"BrandifyAction"},props:{getUserAction:function(e){return h.UserActions.BrandDocument()},execute:function(e){return u.BrandingFacade.brandifyDocument(e.document,this.authoringContext,this.applyFonts,this.addLogo,this.applyColors)}}}),i),s.ChangeBrandingAction=(o=function e(t,n,i){this.fromDocAuthoringContextID=n,this.fromActiveAuthoringContextID=i,this.toAuthoringContext=t,c.Action.call(this,e.TYPE)},l.defineClass({name:"ChangeBrandingAction",ctor:o,superName:"Action",statics:{TYPE:"ChangeBrandingAction"},props:{getUserAction:function(e){return h.UserActions.ChangeBranding(this.fromDocAuthoringContextID,this.fromActiveAuthoringContextID,l.opt(this.toAuthoringContext,(function(e){return e.id})))},execute:function(e){return u.BrandingFacade.changeBranding(e.document,this.toAuthoringContext)}}}),o),s.AddBrandingAction=(a=function e(t){this.authoringContext=t,c.Action.call(this,e.TYPE)},l.defineClass({name:"AddBrandingAction",ctor:a,superName:"Action",statics:{TYPE:"AddBrandingAction"},props:{getUserAction:function(e){return h.UserActions.AddBranding()},execute:function(e){return u.BrandingFacade.addBranding(e.document,this.authoringContext)}}}),a),s.RemoveBrandingAction=(r=function e(t){void 0===t&&(t=!0),this.undoable=t,c.Action.call(this,e.TYPE)},l.defineClass({name:"RemoveBrandingAction",ctor:r,superName:"Action",statics:{TYPE:"RemoveBrandingAction"},props:{getUserAction:function(e){return h.UserActions.RemoveBranding()},execute:function(e){return u.BrandingFacade.removeBranding(e.document)}}}),r)},i5Hy:function(e,t,n){var i,o,a,r,s,l,c=t,u=n("oAGj"),h=n("SpAV"),d=n("gXiO"),p=n("yGNn"),g=n("SmK9"),S=n("iCxV");c.SaveResult=(i=function(){d.CoreObject.call(this)},o={},u.defineClass({name:"SaveResult",ctor:i,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===o.NONE&&(o.NONE=new i),o.NONE}},COMPLETE:{get:function(){return void 0===o.COMPLETE&&(o.COMPLETE=new c.SaveComplete),o.COMPLETE}},fromPromiseAny:function(e){var t;return null==e?(h.CoreAssert.fail("Save promise should resolve with a SaveResult, not nil","SaveResult.fromPromiseAny","SaveManager.swift",22),i.NONE):(t=u.as(e,i))?t:(h.CoreAssert.fail("Save promise should resolve with a SaveResult, not "+e,"SaveResult.fromPromiseAny","SaveManager.swift",27),i.NONE)}}}),i),c.SaveComplete=(a=function(){c.SaveResult.call(this)},u.defineClass({name:"SaveComplete",ctor:a,superName:"SaveResult"}),a),c.SaveErrorMissingState=(r=function(){c.SaveResult.call(this)},u.defineClass({name:"SaveErrorMissingState",ctor:r,superName:"SaveResult"}),r),c.SaveErrorValidationFailed=(s=function(e){this.error=e},u.defineClass({name:"SaveErrorValidationFailed",ctor:s,superName:"SaveResult"}),s),c.SaveManager=(l=function(){this.saveQueue_="com.adobe.theo.core.save",this.saveTimer_=null,this.saveDelaySeconds_=4,this.undoSubscription=null,this.saveLock_=S.Host.async.newLock()},u.defineClass({name:"SaveManager",ctor:l,props:{enable:function(e){},disable:function(){u.opt(this.undoSubscription,(function(e){return e.unsubscribe()})),this.undoSubscription=null,u.opt(this.saveTimer_,(function(e){return e.cancel()})),this.saveTimer_=null},requestSave:function(){var e,t,n=this;if((e=u.opt(this.owner,(function(e){return e.document})))&&null!=(t=u.opt(e.database.immutableState,(function(e){return e.guid})))){var i,o=!1;return e.documentInited()&&((i=this.saveTimer_)&&(i.cancel(),this.saveTimer_=null),u.opt(this.saveLock_,(function(e){return e.runInLock((function(){n.runningSaveState_==t?n.pendingSaveState_=null:null==n.runningSaveState_&&n.lastSaveState_==t?n.pendingSaveState_=null:(n.pendingSaveState_=t,o=!0)}))}))),o?new p.CorePromise((function(e,t){n.saveTimer_=S.Host.async.startTimer(n.saveDelaySeconds_,(function(){n.saveTimer_=null,h.CoreAssert.isTrue(null!=n.owner,"Save manager has no owner. Document closed without calling willCloseDocument?","SaveManager.requestSave","SaveManager.swift",134),S.Host.async.postOnWorkerThread(n.saveQueue_,(function(){u.opt(n.saveLock_,(function(e){return e.runInLock((function(){h.CoreAssert.isTrue(null==n.runningSaveState_,"Save shouldn't be running. Worker queue shouldn't be concurrent.","SaveManager.requestSave","SaveManager.swift",138),n.runningSaveState_=n.pendingSaveState_,n.pendingSaveState_=null}))}));var i,o=n.validate();(i=u.as(o,g.DBValidationError))?(u.opt(n.saveLock_,(function(e){return e.runInLock((function(){n.runningSaveState_=null}))})),t(new c.SaveErrorValidationFailed(i))):(n.save(),u.opt(n.saveLock_,(function(e){return e.runInLock((function(){n.lastSaveState_=n.runningSaveState_,n.runningSaveState_=null}))})),e(c.SaveResult.COMPLETE))}))}))})):p.CorePromise.resolve(c.SaveResult.COMPLETE)}return p.CorePromise.reject(new c.SaveErrorMissingState)},validate:function(){var e,t,n;return(e=u.opt(this.owner,(function(e){return e.document})))&&null!=(t=this.runningSaveState_)&&(n=e.database.getState(t))?n.validate():new g.DBValidationError},save:function(){var e=this;u.opt(u.opt(this.owner,(function(e){return e.document})),(function(t){return t.requestSaveDocumentAt(e.runningSaveState_)}))}}}),l)},jo4Y:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("CWW7"),l=n("yGNn"),c=n("Kkml");o.DeleteAction=(i=function e(t,n){void 0===t&&(t=null),void 0===n&&(n=!0),this.formaeToDelete=a.clone(t),this.undoable=n,r.Action.call(this,e.TYPE)},a.defineClass({name:"DeleteAction",ctor:i,superName:"Action",statics:{TYPE:"DeleteAction"},props:{canDo:function(e){return null!=this.formaeToDelete||e.selection.selectedCount>0},getUserAction:function(e){return c.UserActions.DeleteItem(this.undoable)},execute:function(e){var t=this;return new l.CorePromise((function(n,i){return s.CreationFacade.deleteFormae(a.clone(t.formaeToDelete||e.selection.asFormaArray()),(function(){return n(null)}))}))}}}),i)},lbYW:function(e,t,n){var i,o,a,r=t,s=n("oAGj"),l=n("Tq01"),c=n("O8XL"),u=n("yGNn"),h=n("Kkml");r.AlignFormaeAction=(i=function e(t){this.alignType=t,l.Action.call(this,e.TYPE)},s.defineClass({name:"AlignFormaeAction",ctor:i,superName:"Action",statics:{TYPE:"AlignFormaeAction"},props:{getUserAction:function(e){return h.UserActions.AlignFormae()},execute:function(e){return c.AlignmentFacade.alignFormae(this.alignType,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),i),r.DistributeFormaeAction=(o=function e(t){this.distType=t,l.Action.call(this,e.TYPE)},s.defineClass({name:"DistributeFormaeAction",ctor:o,superName:"Action",statics:{TYPE:"DistributeFormaeAction"},props:{getUserAction:function(e){return h.UserActions.DistributeFormae()},execute:function(e){return c.AlignmentFacade.distributeFormae(this.distType,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),o),r.ArrangeFormaeAction=(a=function e(t){this.horizontal=t,l.Action.call(this,e.TYPE)},s.defineClass({name:"ArrangeFormaeAction",ctor:a,superName:"Action",statics:{TYPE:"ArrangeFormaeAction"},props:{getUserAction:function(e){return h.UserActions.DistributeFormae()},execute:function(e){return c.AlignmentFacade.arrangeFormae(this.horizontal,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),a)},"n/CE":function(e,t,n){var i,o,a,r=t,s=n("oAGj"),l=n("SpAV"),c=n("quOg"),u=n("FNB+"),h=n("cmoc"),d=n("9Lk3"),p=n("iCxV"),g=n("90dd"),S=n("ZoS2");r.SelectionStateChangedMessage=(i=function e(t){g.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateChangedMessage",ctor:i,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateChangedMessage"}}}}),i),r.SelectionMode=s.defineEnum("SelectionMode",{Normal:0,Spacing:1,Crop:2}),r.SelectionStateModeChangedMessage=(o=function e(t){g.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateModeChangedMessage",ctor:o,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateModeChangedMessage"}}}}),o),r.SelectionState=(a=function(){this.selected_=[],this.selectionMode_=r.SelectionMode.Normal,this.inCharStyleMode=!1,S.TheoPublishingObject.call(this)},s.defineClass({name:"SelectionState",ctor:a,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{inSpacingMode:{get:function(){return this.selectionMode_==r.SelectionMode.Spacing},set:function(e){this.selectionMode_=e?r.SelectionMode.Spacing:r.SelectionMode.Normal,s.opt(this.owner,(function(e){return e.updateHandles()}))}},inCropMode:{get:function(){return this.selectionMode_==r.SelectionMode.Crop},set:function(e){var t=e?r.SelectionMode.Crop:r.SelectionMode.Normal;t!=this.selectionMode_&&(this.selectionMode_=t,this.publishSelectionModeChange(),s.opt(this.owner,(function(e){return e.updateHandles()})))}},publishSelectionChange:function(){this.publish(new r.SelectionStateChangedMessage(this))},publishSelectionModeChange:function(){this.publish(new r.SelectionStateModeChangedMessage(this))},selectedCount:{get:function(){return this.selected_.length}},selectedCountInDocument:{get:function(){return this.asFormaArray().length}},IDs:{get:function(){return this.selected_},set:function(e){var t=this;this.clearSelection(!1),e.forEach((function(e){var n;(n=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)})))&&t.selectForma(n,!1)})),this.publishSelectionChange()}},asFormaArray:function(){var e=[];return this.forEachSelected((function(t){s.containsEq(e,t,u._equality_Forma_Forma)||e.push(t)})),e},forEachSelected:function(e){var t=this;this.selected_.forEach((function(n){var i;(i=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(n)})))&&e(i)}))},formaAt:function(e){var t=this;if(e<0||e>=this.selected_.length)return l.CoreAssert.fail("Invalid index for SelectionState.formaAt","SelectionState.formaAt","SelectionState.swift",159),null;var n=s.opt(s.opt(this.owner,(function(e){return e.document})),(function(n){return n.firstPage.root.formaByID(t.selected_[e])}));return null==n&&s.opt(p.Host.logging,(function(t){return t.error("SelectionState.formaAt(index:"+e+") is nil even though index is in range")})),n},isFormaSelectable:function(e){var t;if(((t=s.opt(e.controller,(function(e){return e.userGroupChild})))||null!=t)&&t)for(var n=s.iter(this.asFormaArray());!n.done;n.next()){var i,o,a=n.value;if((i=s.opt(a.controller,(function(e){return e.userGroupRoot})))&&(o=s.opt(e.controller,(function(e){return e.userGroupRoot})))&&i==o)return!1}return!this.isSelected(e)&&this.owner.allowSelectionChanges},selectForma:function(e,t){void 0===t&&(t=!0),this.selectFormae([e],t)},selectFormae:function(e,t){void 0===t&&(t=!0);for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isFormaSelectable(i)&&(s.opt(i.parent,(function(e){return e.kind==h.FrameForma.KIND&&(i.isImage()||i.isVideo())}))?this.selected_.push(i.parent.formaID):this.selected_.push(i.formaID))}t&&this.publishSelectionChange()},replaceSelection:function(e){this.replaceSelectionWithFormae([e])},replaceSelectionWithFormae:function(e){this.clearSelectionArray(),this.selectFormae(s.clone(e))},deselectForma:function(e,t){void 0===t&&(t=!0),this.deselectFormae([e],t)},deselectFormae:function(e,t){if(void 0===t&&(t=!0),this.owner.allowSelectionChanges){for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isSelected(i)&&(s.remove(this.selected_,i.formaID),s.opt(i.parent,(function(e){return e.kind==h.FrameForma.KIND}))&&this.isSelected(i.parent)&&s.remove(this.selected_,i.parent.formaID))}t&&this.publishSelectionChange()}},isSelected:function(e){return this.selected_.includes(e.formaID)},isGroupSelected:function(e){var t,n;return(n=s.opt(e.controller,(function(e){return e.userGroupRoot})))?this.selected_.includes(n.formaID):!(!(t=s.opt(e.controller,(function(e){return e.userGroup})))&&null==t||!t)&&this.selected_.includes(e.formaID)},clearSelectionArray:function(){var e=this;if(this.removeStaleSelections(),this.owner.allowSelectionChanges){var t=[];this.forEachSelected((function(n){e.owner.interactionMode==c.InteractionMode.AutomaticGrid&&null!=n.controller&&n.controller.kind==d.GridController.KIND||t.push(n.formaID)}));for(var n=s.iter(t);!n.done;n.next()){var i=n.value;s.remove(this.selected_,i)}}},clearSelection:function(e){void 0===e&&(e=!0),this.owner.allowSelectionChanges&&this.selectedCount>0&&(this.clearSelectionArray(),e&&this.publishSelectionChange())},clearSelectionNoUpdate:function(){this.owner.allowSelectionChanges&&this.clearSelectionArray()},removeStaleSelections:function(e){void 0===e&&(e=!0);var t=this,n=[];this.selected_.forEach((function(e){null==s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)}))&&n.push(e)}));for(var i=s.iter(n);!i.done;i.next()){var o=i.value;s.remove(this.selected_,o)}e&&n.length>0&&this.owner.allowSelectionChanges&&this.publishSelectionChange()}}}),a)},oKI3:function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("SpAV"),l=n("c+uM"),c=n("BgH2"),u=n("oKlP");a.TextPathID=r.defineEnum("TextPathID",{UNSET:-1,Custom:0,Circle:1,SemiCircleUp:2,SemiCircleDown:3,ArcUp:4,ArcDown:5,Wave:6,Rect:7,Line:8}),a.TextPathLibrary=(i=function(){},o={},r.defineClass({name:"TextPathLibrary",ctor:i,statics:{getPathForLockupStyle:function(e){var t=e.layout;s.CoreAssert.isTrue(l.LockupStyle.isPath(t),"Why are we asking for a path for a non path layout?","TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",42);var n=e.pathID;return s.CoreAssert.isFalse(n==a.TextPathID.UNSET,"Why are we asking for a path when pathID is not set?","TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",45),n==a.TextPathID.Custom?(s.CoreAssert.isTrue(null!=e.customPath,"No custom path","TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",47),e.customPath):i.getPathByID(n)},getPathByID:function(e){var t;return(t=i.paths[e])?t.clone():(s.CoreAssert.fail("Unsupported path id "+e,"TextPathLibrary.getPathByID","TextPathLibrary.swift",59),i.circlePath)},isPathSymmetric:function(e){switch(e){case 1:case 6:case 7:case 8:return!0;case 2:case 3:case 4:case 5:case 0:return!1;case-1:return s.CoreAssert.fail("Unsupported path id "+e,"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",83),!1;default:return s.CoreAssert.fail("Unsupported path id "+e,"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",86),!1}},c:.551915024494,quad0:{get:function(){return void 0===o.quad0&&(o.quad0=new c.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(0,-i.c),new u.TheoPoint(1-i.c,-1),new u.TheoPoint(1,-1))),o.quad0}},quad1:{get:function(){return void 0===o.quad1&&(o.quad1=new c.TextPathSegment(new u.TheoPoint(1,-1),new u.TheoPoint(1+i.c,-1),new u.TheoPoint(2,-i.c),new u.TheoPoint(2,0))),o.quad1}},quad2:{get:function(){return void 0===o.quad2&&(o.quad2=new c.TextPathSegment(new u.TheoPoint(2,0),new u.TheoPoint(2,i.c),new u.TheoPoint(1+i.c,1),new u.TheoPoint(1,1))),o.quad2}},quad3:{get:function(){return void 0===o.quad3&&(o.quad3=new c.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(1-i.c,1),new u.TheoPoint(0,i.c),new u.TheoPoint(0,0))),o.quad3}},quad2Prime:{get:function(){return void 0===o.quad2Prime&&(o.quad2Prime=new c.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(0,i.c),new u.TheoPoint(1-i.c,1),new u.TheoPoint(1,1))),o.quad2Prime}},quad3Prime:{get:function(){return void 0===o.quad3Prime&&(o.quad3Prime=new c.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(1+i.c,1),new u.TheoPoint(2,i.c),new u.TheoPoint(2,0))),o.quad3Prime}},upArc:{get:function(){return void 0===o.upArc&&(o.upArc=new c.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,-1),new u.TheoPoint(4,-1),new u.TheoPoint(6,0))),o.upArc}},downArc:{get:function(){return void 0===o.downArc&&(o.downArc=new c.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,1),new u.TheoPoint(4,1),new u.TheoPoint(6,0))),o.downArc}},wave:{get:function(){return void 0===o.wave&&(o.wave=new c.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,-2),new u.TheoPoint(4,2),new u.TheoPoint(6,0))),o.wave}},lineTop:{get:function(){return void 0===o.lineTop&&(o.lineTop=new c.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(.3,0),new u.TheoPoint(.7,0),new u.TheoPoint(1,0))),o.lineTop}},lineRight:{get:function(){return void 0===o.lineRight&&(o.lineRight=new c.TextPathSegment(new u.TheoPoint(1,0),new u.TheoPoint(1,.3),new u.TheoPoint(1,.7),new u.TheoPoint(1,1))),o.lineRight}},lineBottom:{get:function(){return void 0===o.lineBottom&&(o.lineBottom=new c.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(.7,1),new u.TheoPoint(.3,1),new u.TheoPoint(0,1))),o.lineBottom}},lineLeft:{get:function(){return void 0===o.lineLeft&&(o.lineLeft=new c.TextPathSegment(new u.TheoPoint(0,1),new u.TheoPoint(0,.7),new u.TheoPoint(0,.3),new u.TheoPoint(0,0))),o.lineLeft}},circlePath:{get:function(){return void 0===o.circlePath&&(o.circlePath=new c.TextPath([i.quad0,i.quad1,i.quad2,i.quad3])),o.circlePath}},semicirclePath:{get:function(){return void 0===o.semicirclePath&&(o.semicirclePath=new c.TextPath([i.quad0,i.quad1])),o.semicirclePath}},semicircleDownPath:{get:function(){return void 0===o.semicircleDownPath&&(o.semicircleDownPath=new c.TextPath([i.quad2Prime,i.quad3Prime])),o.semicircleDownPath}},upArcPath:{get:function(){return void 0===o.upArcPath&&(o.upArcPath=new c.TextPath([i.upArc],2.5)),o.upArcPath}},downArcPath:{get:function(){return void 0===o.downArcPath&&(o.downArcPath=new c.TextPath([i.downArc],2.5)),o.downArcPath}},wavePath:{get:function(){return void 0===o.wavePath&&(o.wavePath=new c.TextPath([i.wave])),o.wavePath}},rectPath:{get:function(){return void 0===o.rectPath&&(o.rectPath=new c.TextPath([i.lineTop,i.lineRight,i.lineBottom,i.lineLeft],1/0)),o.rectPath}},linePath:{get:function(){return void 0===o.linePath&&(o.linePath=new c.TextPath([i.lineTop])),o.linePath}},paths:{get:function(){return void 0===o.paths&&(o.paths={1:i.circlePath,2:i.semicirclePath,3:i.semicircleDownPath,4:i.upArcPath,5:i.downArcPath,6:i.wavePath,7:i.rectPath,8:i.linePath}),o.paths}}}}),i)},pjjd:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("CWW7"),l=n("yGNn"),c=n("FNB+"),u=n("lmwz"),h=n("Kkml");o.DuplicateAction=(i=function e(t,n,i){this.formaeToDuplicate=a.clone(t),this.offsetDuplicates=n,this.selectDuplicates=i,r.Action.call(this,e.TYPE)},a.defineClass({name:"DuplicateAction",ctor:i,superName:"Action",statics:{TYPE:"DuplicateAction",canAddImages:function(e){if(0==e.length)return!1;for(var t=0,n=a.iter(e);!n.done;n.next())n.value.isImage()&&(t+=1);return u.ImageFacade.canAddImages(e[0].root,t)},useSelection:function(){return new i(null,!0,!0)}},props:{getUserAction:function(e){return h.UserActions.DuplicateItems(a.clone(this.formaeToDuplicate||e.selection.asFormaArray()))},execute:function(e){var t=this;return s.CreationFacade.duplicateItems(a.clone(this.formaeToDuplicate||e.selection.asFormaArray()),this.offsetDuplicates,!1).then((function(e){var n;return(n=a.as(e,["Array",c.Forma]))?(t.selectDuplicates&&(t.newSelection=a.clone(n)),new r.FormaActionResult(a.clone(n))):l.CorePromise.reject("did not get an array of Forma back from CreationFacade.duplicateItems")}))},updateSelection:function(e){return null!=this.newSelection&&this.selectDuplicates&&e.selection.replaceSelectionWithFormae(a.clone(this.newSelection)),this.newSelection}}}),i)},raY1:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("CWW7"),l=n("Kkml");o.AddFormaAction=(i=function e(t,n,i){this.page=t,this.forma=n,this.params=i,r.Action.call(this,e.TYPE)},a.defineClass({name:"AddFormaAction",ctor:i,superName:"Action",statics:{TYPE:"AddFormaAction"},props:{getUserAction:function(e){return l.UserActions.AddImage()},execute:function(e){return s.CreationFacade.addForma(this.page,this.forma,this.params)}}}),i)},rrhp:function(e,t,n){var i,o,a,r,s,l=t,c=n("oAGj"),u=n("0wFF"),h=n("SpAV"),d=n("yGNn"),p=n("P83h"),g=n("ZhwN"),S=n("iCxV"),m=n("90dd"),f=n("ZoS2"),A=n("Kkml");l.IDocumentStateManager=c.defineProtocol("IDocumentStateManager",{resetStates:"() -> Void",getRootState:"() -> IDocumentState",beginNewState:"(String) -> Void",endNewState:"() -> IDocumentState",setCurrentState:"(IDocumentState) -> Void",getNewStateNestingDepth:"() -> Integer"}),l.IDocumentState=c.defineProtocol("IDocumentState",{}),l.PatchStatus=(i=function(e){this.depth=0,this.newStateBegun=e},c.defineClass({name:"PatchStatus",ctor:i}),i),l.TimelineState=(o=function(e,t){this.actionDepth=0,this.patch=null,this.beginSelectedFormaIDs=[],this.endSelectedFormaIDs=[],this.beganInCharStyleMode=!1,this.endedInCharStyleMode=!1,this.compoundingActionWrapperEvent=null,this.branchName=null,this.action=e,this.state=t},c.defineClass({name:"TimelineState",ctor:o,props:{description:{get:function(){var e;return(e=this.branchName)||null!=e?e:c.opt(this.action,(function(e){return e.description}))}}}}),o),l.Timeline=(a=function(e,t){this.states=[],this.current=-1,void 0===e&&(e=null),void 0===t&&(t=null),this.gesture=e,this.name=t},c.defineClass({name:"Timeline",ctor:a,statics:{gesture:function(e){return new a(e,null)},branch:function(e){return new a(null,e)}},props:{currentState:{get:function(){return this.current<0||this.current>this.states.length?null:this.states[this.current]}}}}),a),l.UndoRedoChangeDirection=c.defineEnum("UndoRedoChangeDirection",{Undo:"undo",Redo:"redo"}),l.UndoRedoMessage=(r=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.changeType=n,this.changeAction=i,this.changeDirection=o,m.TheoMessage.call(this,e.TYPE,t)},c.defineClass({name:"UndoRedoMessage",ctor:r,superName:"TheoMessage",statics:{TYPE:"UndoRedoMessage",UNDO_REDO_CHANGE:"state-changed",UNDO_REDO_GESTURE_BEGIN:"gesture-begin",UNDO_REDO_GESTURE_END:"gesture-end",UNDO_REDO_STATE_CLEAN:"state-clean"}}),r),l.UndoRedoSelectionPolicyEnum=c.defineEnum("UndoRedoSelectionPolicyEnum",{RestoreSelection:"restore",PreserveSelection:"preserve"}),l.UndoRedoManager=(s=function(e){this.applyingUpdatedPatchesDepth=0,this.waitingCallbacks=[],this.timeline=new l.Timeline,this.timelineStack=[],this.patches=[],this._selectionPolicy=e,f.TheoPublishingObject.call(this)},c.defineClass({name:"UndoRedoManager",ctor:s,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{setup:function(){var e;(e=c.opt(this.owner,(function(e){return e.document})))&&(this.stateMgr=c.opt(S.Host.factories,(function(t){return t.constructDocumentStateManager(e)}))),this.reset()},shouldCollapseActions:function(e,t){return null!=e&&null!=t&&e.description==t.description&&e.scope==t.scope},updateSelection:function(e,t,n){var i;if(this._selectionPolicy==l.UndoRedoSelectionPolicyEnum.PreserveSelection)c.opt(this.owner,(function(e){return e.selection.removeStaleSelections(!1)}));else{var o=[],a=!1;if("cancel-branch"==e?(o=c.clone(c.opt(this.owner,(function(e){return e.selection.IDs}))||[]),a=!(!(i=c.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==i)&&i):"set-index"==e&&t>n?(o=c.clone(this.timeline.states[t].beginSelectedFormaIDs),a=this.timeline.states[t].beganInCharStyleMode):(o=c.clone(this.timeline.currentState.endSelectedFormaIDs),a=this.timeline.currentState.endedInCharStyleMode),"set-index"==e){a=!1;for(var r=[],s=c.iter(o);!s.done;s.next()){var u,h=s.value;(u=c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(h)})))&&(u.isText()||r.push(h))}o=c.clone(r)}"user-action"!=e&&(c.opt(this.owner,(function(e){return e.selection.inCharStyleMode=a})),c.opt(this.owner,(function(e){return e.selection.IDs=c.clone(o)})))}},reset:function(){c.opt(this.stateMgr,(function(e){return e.resetStates()})),this.timeline=new l.Timeline,this.timeline.states.push(new l.TimelineState(null,c.opt(this.stateMgr,(function(e){return e.getRootState()})))),this.timeline.current=0,this.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)},debugDescribeCurrentState:function(){var e,t,n=this.timelineStack.length>0?"[branch depth "+c.toString(this.timelineStack.length)+"] ":"";return n+="Index "+c.toString(this.timeline.current),(e=this.timeline.currentState)?(t=e.action)?n+=" ("+t.description+")":n+=" (Initial state)":n+=" (Invalid state)",n},beginBranch:function(){this.beginNamedBranch(null)},beginNamedBranch:function(e){h.CoreAssert.info("Starting new branch @ "+this.debugDescribeCurrentState()),h.CoreAssert.isTrue(null==this.gestureScope,"Should not branch in the middle of a running gesture","UndoRedoManager.beginNamedBranch","UndoRedoManager.swift",314),this.timelineStack.push(this.timeline);var t=l.Timeline.branch(e);t.states.push(this.timeline.currentState),t.current=0,this.timeline=t},endBranch:function(e){var t=this;if(this.timelineStack.length>0){h.CoreAssert.info((e?"Committing":"Canceling")+" branch @ "+this.debugDescribeCurrentState());var n=this.timelineStack.pop();if(e){var i=this.timeline.currentState,o=this.timeline.name;if(this.timeline=n,i===this.timeline.currentState);else{if(this.timeline.current<this.timeline.states.length-1){var a=this.timeline.current+1,r=this.timeline.states.length-a;this.timeline.states.splice(a,r)}c.opt(i,(function(e){return e.branchName=o})),this.timeline.states.push(i),this.timeline.current=this.timeline.states.length-1}this.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE)}else this.timeline=n,c.opt(this.stateMgr,(function(e){return e.setCurrentState(t.timeline.currentState.state)})),this.applyPatches((function(){t.updateSelection("cancel-branch",-1,-1),t.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE)}));0==this.timelineStack.length&&this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}else h.CoreAssert.fail("endBranch: branch stack underflow @ "+this.debugDescribeCurrentState(),"UndoRedoManager.endBranch","UndoRedoManager.swift",374)},beginGesture:function(){if(h.CoreAssert.isTrue(null==this.gestureScope,"Beginning gesture scope when gesture already running","UndoRedoManager.beginGesture","UndoRedoManager.swift",396),null==this.gestureScope){h.CoreAssert.info("Starting new gesture branch @ "+this.debugDescribeCurrentState()),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_GESTURE_BEGIN),this.timelineStack.push(this.timeline);var e=l.Timeline.gesture(g.GUIDUtils.makeGUID());e.states.push(this.timeline.currentState),e.current=0,this.timeline=e}},endGesture:function(e){h.CoreAssert.isTrue(null!=this.gestureScope,"Ending gesture scope when no gesture running","UndoRedoManager.endGesture","UndoRedoManager.swift",409),null!=this.gestureScope&&(this.endBranch(e),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_GESTURE_END))},gestureScope:{get:function(){return this.timeline.gesture}},beginUserActionAsync:function(e){var t=this;return new d.CorePromise((function(n,i){return t.beginUserAction(e,(function(){return n(null)}))}))},endUserActionAsync:function(){var e=this;return new d.CorePromise((function(t,n){return e.endUserAction((function(){return t(null)}))}))},beginUserAction:function(e,t){var n,i=this;h.CoreAssert.info("beginUserAction @ ("+e.description+")");var o=this.timeline.currentState;if(o.actionDepth>0)h.CoreAssert.fail("Nested user action "+e.description+" detected ("+o.action.description+" currently running)","UndoRedoManager.beginUserAction","UndoRedoManager.swift",455),o.actionDepth+=1,t();else{this.timeline.states.length>this.timeline.current+1&&this.timeline.states.splice(this.timeline.current+1,this.timeline.states.length-this.timeline.current-1);var a=new l.TimelineState(e,null);a.beginSelectedFormaIDs=c.clone(c.opt(this.owner,(function(e){return e.selection.IDs}))||[]),a.beganInCharStyleMode=!(!(n=c.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==n)&&n;var r=!1,s=this.shouldCollapseActions(o.action,e),u=e.collapseSequential==A.CollapseBehavior.ALWAYS||e.collapseSequential==A.CollapseBehavior.GESTURE_DEPENDENT&&null!=this.gestureScope;if(!(null!=this.gestureScope&&this.timeline.current>=1)||u&&s){if((!e.compounding||u)&&s&&this.timeline.current>=1){for(var d=this.timeline.current-1;d>0&&this.shouldCollapseActions(this.timeline.states[d].action,e);)d-=1;e.compounding||(a.compoundingActionWrapperEvent=new p.FormaNullChangedEvent(this.owner.document.firstPage.root),c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(a.compoundingActionWrapperEvent)})),c.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[d].state)})),r=!0),u&&this.timeline.states.splice(d+1,1)}}else a.compoundingActionWrapperEvent=new p.FormaNullChangedEvent(this.owner.document.firstPage.root),c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(a.compoundingActionWrapperEvent)})),c.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[0].state)})),r=!0;this.timeline.states.push(a),this.timeline.current=this.timeline.states.length-1,r?this.applyPatches((function(){a.actionDepth=1,c.opt(i.stateMgr,(function(t){return t.beginNewState(e.description)})),t()})):(a.actionDepth=1,c.opt(this.stateMgr,(function(t){return t.beginNewState(e.description)})),t())}},endUserAction:function(e){var t,n,i=this;(n=this.timeline.currentState)?(h.CoreAssert.info("endUserAction @ "+this.debugDescribeCurrentState()),h.CoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action","UndoRedoManager.endUserAction","UndoRedoManager.swift",543),h.CoreAssert.isTrue(null!=n.action,"invalid current state for ending a user action","UndoRedoManager.endUserAction","UndoRedoManager.swift",544),0==n.actionDepth?h.CoreAssert.fail("User action stack underflow","UndoRedoManager.endUserAction","UndoRedoManager.swift",547):n.actionDepth>1?(n.actionDepth-=1,e()):(null!=n.compoundingActionWrapperEvent&&(c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.endUpdate(n.compoundingActionWrapperEvent)})),n.compoundingActionWrapperEvent=null),n.actionDepth=0,n.endSelectedFormaIDs=c.clone(c.opt(this.owner,(function(e){return e.selection.IDs}))||[]),n.endedInCharStyleMode=!(!(t=c.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==t)&&t,this.applyPatches((function(){for(;i.waitingCallbacks.length>0&&0==i.timeline.currentState.actionDepth;)i.waitingCallbacks.shift()();i.updateSelection("user-action",-1,-1),i.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE),e(),0==i.timelineStack.length&&0==i.timeline.currentState.actionDepth&&i.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)})))):h.CoreAssert.fail("invalid current state for ending a user action","UndoRedoManager.endUserAction","UndoRedoManager.swift",585)},cancelUserAction:function(e){var t,n=this;if(t=this.timeline.currentState)if(h.CoreAssert.info("cancelUserAction @ "+this.debugDescribeCurrentState()),h.CoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",597),0==t.actionDepth)h.CoreAssert.fail("User action stack underflow","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",600);else{if(t.actionDepth>1)return h.CoreAssert.fail("Can not cancel a user action with a depth greater than 1","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",602),this.endUserAction(e);t.actionDepth=0,t.endSelectedFormaIDs=c.clone(c.opt(this.owner,(function(e){return e.selection.IDs}))||[]);var i=this.getCurrentTimelineIndex(),o=i-1;t.state=c.opt(this.stateMgr,(function(e){return e.endNewState()})),this.setCurrentTimelineIndex(o,(function(){for(n.removeTimelineStateAtIndex(i),n.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE);n.waitingCallbacks.length>0&&0==n.timeline.currentState.actionDepth;)n.waitingCallbacks.shift()();e(),0==n.timelineStack.length&&0==n.timeline.currentState.actionDepth&&n.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}))}else h.CoreAssert.fail("invalid current state for ending a user action","UndoRedoManager.cancelUserAction","UndoRedoManager.swift",631)},getActionDepth:function(){var e;return(e=c.opt(this.timeline.currentState,(function(e){return e.actionDepth})))||null!=e?e:0},registerPatch:function(e){this.patches.push(e)},getPatchDepth:function(){var e;return(e=c.opt(c.opt(this.timeline.currentState,(function(e){return e.patch})),(function(e){return e.depth})))||null!=e?e:-1},beginPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?(t.newStateBegun||(c.opt(this.stateMgr,(function(e){return e.beginNewState("patch")})),t.newStateBegun=!0),t.depth+=1):h.CoreAssert.fail("Invalid beginPatch: not in a patching context.","UndoRedoManager.beginPatch","UndoRedoManager.swift",681))},endPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?t.depth>0?t.depth-=1:h.CoreAssert.fail("Patch stack underflow!","UndoRedoManager.endPatch","UndoRedoManager.swift",695):h.CoreAssert.fail("Invalid beginPatch: not in a patching context.","UndoRedoManager.endPatch","UndoRedoManager.swift",698))},invalidatePatches:function(e){var t=this;0==this.getActionDepth()?(this.applyingUpdatedPatchesDepth+=1,this.applyPatches((function(){t.publishEvent("state-updated"),t.applyingUpdatedPatchesDepth-=1,e()}))):e()},undo:function(e){var t,n=this;h.CoreAssert.isTrue(null==this.gestureScope,"Should not undo in the middle of a running gesture","UndoRedoManager.undo","UndoRedoManager.swift",732),this.timeline.current<=0?e():(c.opt(S.Host.logging,(function(e){return e.logToAnalytics(u.AnalyticsConstants.kAnalyticsDataUndo,{contextualData2:(t=n.getUndoDescription())||null!=t?t:"unknown"})})),this.setCurrentTimelineIndex(this.timeline.current-1,e,l.UndoRedoChangeDirection.Undo))},redo:function(e){var t,n=this;h.CoreAssert.isTrue(null==this.gestureScope,"Should not redo in the middle of a running gesture","UndoRedoManager.redo","UndoRedoManager.swift",750),this.timeline.current==this.timeline.states.length-1?e():(c.opt(S.Host.logging,(function(e){return e.logToAnalytics(u.AnalyticsConstants.kAnalyticsDataRedo,{contextualData2:(t=n.getRedoDescription())||null!=t?t:"unknown"})})),this.setCurrentTimelineIndex(this.timeline.current+1,e,l.UndoRedoChangeDirection.Redo))},getUndoDescription:function(){return this.timeline.current<=0?null:c.opt(this.timeline.currentState,(function(e){return e.description}))},getRedoDescription:function(){return this.timeline.current==this.timeline.states.length-1?null:this.timeline.states[this.timeline.current+1].description},applyPatches:function(e){var t,n=this,i=this.timeline.states[this.timeline.current];h.CoreAssert.isTrue(null==i.patch,"applying patches before previous patch context is finished!","UndoRedoManager.applyPatches","UndoRedoManager.swift",784),h.CoreAssert.isTrue(0==i.actionDepth,"should not apply patches while user action still mutating","UndoRedoManager.applyPatches","UndoRedoManager.swift",785),i.patch=new l.PatchStatus(((t=c.opt(this.stateMgr,(function(e){return e.getNewStateNestingDepth()})))||null!=t?t:0)>0),function e(t,o){t>=n.patches.length?o():(i!==n.timeline.states[n.timeline.current]&&h.CoreAssert.warning("unexpected change of timeline during patching"),h.CoreAssert.isTrue(null!=i.patch&&0==i.patch.depth,"unexpected state between patches","UndoRedoManager.applyPatches","UndoRedoManager.swift",797),n.patches[t]((function(){return e(t+1,o)})))}(0,(function(){i!==n.timeline.currentState&&h.CoreAssert.warning("unexpected change of timeline during patching"),i.patch.newStateBegun&&(i.state=c.opt(n.stateMgr,(function(e){return e.endNewState()}))),i.patch=null,e()}))},getTimelineLength:function(){return this.timeline.states.length},getCurrentTimelineState:function(){return this.timeline.currentState},getCurrentTimelineIndex:function(){return this.timeline.current},getTimelineStateAtIndex:function(e){return h.CoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"getTimelineStateAtIndex: index out of range","UndoRedoManager.getTimelineStateAtIndex","UndoRedoManager.swift",844),this.timeline.states[e]},publishUndoEvent:function(e){var t;((t=c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited()})))||null!=t)&&t&&(this.publish(new l.UndoRedoMessage(this,l.UndoRedoMessage.UNDO_REDO_CHANGE,e,l.UndoRedoChangeDirection.Undo)),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishRedoEvent:function(e){var t;((t=c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited()})))||null!=t)&&t&&(this.publish(new l.UndoRedoMessage(this,l.UndoRedoMessage.UNDO_REDO_CHANGE,e,l.UndoRedoChangeDirection.Redo)),this.publishEvent(l.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishEvent:function(e){var t;(e!=l.UndoRedoMessage.UNDO_REDO_CHANGE||((t=c.opt(c.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited()})))||null!=t)&&t)&&this.publish(new l.UndoRedoMessage(this,e))},removeTimelineStateAtIndex:function(e){h.CoreAssert.isTrue(e>0,"removeStateAtIndex: should not remove the initial state!","UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",879),h.CoreAssert.isTrue(e!=this.timeline.current,"removeStateAtIndex: should not remove the current state!","UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",880),h.CoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"removeStateAtIndex: index out of range","UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",881),e>0&&e<this.timeline.states.length&&(this.timeline.states.splice(e,1),e<this.timeline.current&&(this.timeline.current-=1),this.publishEvent("timeline-changed"))},setCurrentTimelineIndex:function(e,t,n){void 0===n&&(n=null);var i=this,o=n==l.UndoRedoChangeDirection.Undo,a=n==l.UndoRedoChangeDirection.Redo;if(h.CoreAssert.info("setting timeline index to "+c.toString(e)+" @ "+this.debugDescribeCurrentState()),e!=this.timeline.current&&e>=0&&e<this.timeline.states.length){var r=c.opt(this.timeline.currentState,(function(e){return e.action})),s=this.timeline.current;this.timeline.current=e;var u=c.opt(this.timeline.currentState,(function(e){return e.action}));return c.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.currentState.state)})),this.applyPatches((function(){i.updateSelection("set-index",s,e),o?i.publishUndoEvent(r):a?i.publishRedoEvent(u):i.publishEvent(l.UndoRedoMessage.UNDO_REDO_CHANGE),t()}))}t()},whenNoCurrentAction:function(e){0==this.timeline.currentState.actionDepth?e():this.waitingCallbacks.push(e)},currentlyExecutingAction:function(){var e;return!!(e=this.timeline.currentState)&&(this.getActionDepth()>0||null!=e.patch)}}}),s)},rsKm:function(e,t,n){var i,o,a,r=t,s=n("oAGj"),l=n("Tq01"),c=n("yGNn"),u=n("gBh/"),h=n("c+uM"),d=n("8t9B"),p=n("Kkml");r.ApplyColorThemeAction=(i=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!1),this.themeColors=s.clone(t),this.themeID=n,this.doShuffle=o,this.page=i,l.Action.call(this,e.TYPE)},s.defineClass({name:"ApplyColorThemeAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyColorThemeAction"},props:{getUserAction:function(e){return this.doShuffle?p.UserActions.ShuffleColorTheme():p.UserActions.SetColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.applyColorTheme(s.clone(this.themeColors),this.themeID,t),this.doShuffle&&u.ColorThemeFacade.shuffleColorTheme(t)),c.CorePromise.resolve(new l.ActionResult)}}}),i),r.ShuffleColorThemeAction=(o=function e(t){void 0===t&&(t=null),this.page=t,l.Action.call(this,e.TYPE)},s.defineClass({name:"ShuffleColorThemeAction",ctor:o,superName:"Action",statics:{TYPE:"ShuffleColorThemeAction"},props:{getUserAction:function(e){return p.UserActions.ShuffleColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&u.ColorThemeFacade.shuffleColorTheme(t),c.CorePromise.resolve(new l.ActionResult)}}}),o),r.ModifyColorThemeAction=(a=function e(t,n,i){void 0===i&&(i=null),this.color=t,this.key=n,this.page=i,l.Action.call(this,e.TYPE)},s.defineClass({name:"ModifyColorThemeAction",ctor:a,superName:"Action",statics:{TYPE:"ModifyColorThemeAction"},props:{getUserAction:function(e){return p.UserActions.ModifyColorTheme()},execute:function(e){var t,n=this;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.modifyColorTheme(this.color,this.key,t),t.root.filterByControllerKind(d.TypeLockupController.KIND).forEach((function(e){var t;if(t=s.opt(s.as(e.style,h.LockupStyle),(function(e){return e.characterStyles.Highlight}))){var i=!1;t.colors.forEachColor((function(t,o,a){o!=n.key||i||(s.opt(e.controller,(function(e){return e.styleChanged()})),i=!0)}))}}))),c.CorePromise.resolve(new l.ActionResult)}}}),a)},wpCo:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("0wFF"),l=n("6h7+"),c=n("iCxV"),u=n("Kkml");o.AddBadgeAction=(i=function e(t,n,i){void 0===i&&(i="lockup"),this.badgeDoc=t,this.badgeID=n,this.badgeType=i,r.Action.call(this,e.TYPE)},a.defineClass({name:"AddBadgeAction",ctor:i,superName:"Action",statics:{TYPE:"AddBadgeAction"},props:{getUserAction:function(e){return u.UserActions.AddBadge()},execute:function(e){var t=this,n=e.document;return l.BadgeFacade.addBadge(this.badgeDoc,this.badgeID,n.firstPage).then((function(e){var n;return(n=a.opt(a.as(e,r.FormaActionResult),(function(e){return e.formae})))&&(t.newSelection=a.clone(n)),a.opt(c.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kDesignIngredientAdded,{contextualData1:"designIngredientId:"+t.badgeID,contextualData2:"designIngredientType:"+t.badgeType})})),e}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(a.clone(this.newSelection)),this.newSelection}}}),i)}}]);
//# sourceMappingURL=vendors_npm_spark_c4f60e44-371885a2.js.map